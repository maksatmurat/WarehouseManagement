@attribute [Authorize]

    <AuthorizeView>
        <Authorized>

            <div class="top-row ps-3 navbar navbar-dark">
                <div class="container-fluid">
                    <a class="navbar-brand" href="">Управление складом</a>
                    <span class="navbar-text text-white" >Welcome,@context.User.Identity!.Name </span>
                    <button title="Navigation menu" class="navbar-toggler" @onclick="ToggleNavMenu">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </div>


            <div class="@NavMenuCssClass " @onclick="ToggleNavMenu">
                <nav class="nav flex-column">
                    <div class="group">
                        <h4 class="card-header text-white px-3" style="padding-top:1rem">Склад</h4>
                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                                Баланс
                            </NavLink>
                        </div>
                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="counter">
                                Поступления
                            </NavLink>
                        </div>
                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="counter2">
                                Отгрузки
                            </NavLink>
                        </div>
                    </div>
                    <div class="group">
                        <h4 class="card-header text-white px-3" style="padding-top:1rem">Справочники</h4>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/clients">
                                Клиенты
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/UnitOfMeasures">
                                Единицы измерения
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/resources">
                                Ресурсы
                            </NavLink>
                        </div>
                    </div>
                    <div class="group">
                        <button class="btn btn-danger btn-sm fw-bold w-100 "  @onclick="LogoutClicked">
                            Выйти 
                        </button>
                    </div>
                </nav>
            </div>
        </Authorized>
    </AuthorizeView>
    @code {
        private bool collapseNavMenu = true;

        private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;

        private void ToggleNavMenu()
        {
            collapseNavMenu = !collapseNavMenu;
        }
        async Task LogoutClicked()
        {
            var logoutModel = new UserSession();
            var customAuthStateProvider = (CustomAuthenticationStateProvider)AuthStateProvider;
            await customAuthStateProvider.UpdateAuthenticationState(logoutModel);
            NavManager.NavigateTo("/identity/account/login", replace: true, forceLoad: true);
        }
    }
